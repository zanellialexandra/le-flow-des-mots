<div class="card">
    <div class="card-header  my-bg-primary  appuye">
      <h4 class="text-white">Administration du contenu dynamique (POST)</h4>
    </div>
    <div class="card-body fondParDefaut">

    <ngb-tabset type="pills">
            <ngb-tab  title="Nouveau">
              <ng-template ngbTabContent>
                <div class="card my-tab-content">
                   <!-- debut contenu onglet 1 --> &nbsp;
            <form role="form" #formPublication="ngForm" (mouseenter)="onFormInit()"
            method="POST" encType="multipart/form-data"  id="formUpload" class="form-horizontal">
              
                <bsu-my-fg-label [label]="'Categorie'">
                    <select class="form-control" name="categorie"
                             [(ngModel)]="publication.categorie" >
                      <option value="news" selected>news / actualité</option>
                      <option value="atelier_ecriture" >atelier_ecriture</option>
                    </select>
                </bsu-my-fg-label>
                
                <bsu-my-fg-label [label]="'Titre'">
                    <input type="text" class="form-control" 
                           name="titre" [(ngModel)]="publication.titre" />
                </bsu-my-fg-label>
                
                <bsu-my-fg-label [label]="'image (facultative)'">
                    <input type="file" class="form-control" 
                            id="f_imageFile"
                           (change)="handleImageFileInput($event.target.files)"/>
                </bsu-my-fg-label>
                
                <bsu-my-fg-label [label]="'Texte/Résumé (html)'">
                    <textarea rows="3" class="form-control" name="resume"
                              [(ngModel)]="publication.resume" 
                              (dblclick)="modalResume.openThisContext()" ></textarea>
                </bsu-my-fg-label>
                <bsu-modal [title]="publication.titre" #modalResume
                           [innerHtmlText]="publication.resume"></bsu-modal>
              
                <bsu-my-fg-label [label]="'type de détail'">
                    <input type="radio" name="detailType" [(ngModel)]="detailType" [value]="'none'" /> aucun &nbsp;&nbsp;
                    <input type="radio" name="detailType" [(ngModel)]="detailType" [value]="'text'" /> texte développé (html simple)&nbsp;&nbsp;
                    <input type="radio" name="detailType" [(ngModel)]="detailType" [value]="'file'" /> fichier (.html, .pdf)&nbsp;&nbsp;
                    <input type="radio" name="detailType" [(ngModel)]="detailType" [value]="'link'" /> lien externe
                </bsu-my-fg-label>
              
                <bsu-my-fg-label [label]="'Fichier (page) de détails'"
                                 [style.display]="detailType=='file'?'block':'none'">
                    <input type="file" class="form-control" 
                           (change)="handleDetailFileInput($event.target.files)"
                            id="f_detailsFile" />
                </bsu-my-fg-label>
                
                <bsu-my-fg-label [label]="'Texte développé (html simple)'"
                                 [style.display]="detailType=='text'?'block':'none'">
                    <textarea rows="10" class="form-control" name="texte_complet"
                              [(ngModel)]="publication.texte_complet" 
                              (dblclick)="modalTexteComplet.openThisContext()"></textarea>
                </bsu-my-fg-label>
                <bsu-modal [title]="publication.titre" #modalTexteComplet
                           [innerHtmlText]="publication.texte_complet"></bsu-modal>
                          
                <bsu-my-fg-label [label]="'Lien hypertexte externe'"
                                 [style.display]="detailType=='link'?'block':'none'">
                    <input type="email" class="form-control" name="link"
                           [(ngModel)]="publication.lien_externe"
                          placeholder="exemple http://site-externe.com/page-interessante.html" />
                </bsu-my-fg-label>
                
                <div class="form-group row">
                  <div class="col-sm-offset-3 col-sm-9">
                  <input  type="submit" class="btn my-bg-primary text-white" 
                          [disabled]="!formPublication.form.valid" value="Publier" 
                          (click)="onSubmit()" />
                  </div>
                </div>
                
              </form>
              <!-- fin contenu onglet 1 -->
                </div>
              </ng-template>
            </ngb-tab>

            <ngb-tab  title="Liste">
                <ng-template ngbTabContent>
                <div class="like-card my-tab-content">
                    <!-- debut contenu onglet 2 -->
                  <br/><u>filtrage des publications:</u>
                
                  &nbsp;&nbsp;<input type="radio" name="filtrePost" 
                                     [(ngModel)]="filtrePost" [value]="'news'"/>&nbsp;news/actualités
                  &nbsp;&nbsp;&nbsp;<input type="radio" name="filtrePost" 
                                     [(ngModel)]="filtrePost" [value]="'atelier_ecriture'"/>&nbsp;atelier écriture<br/>
              
                  <input type="button" value="actualiser liste des publications" 
                             (click)="onRechercherPublications()"/> <br/><br/>
                  <div [style.overflow]="'auto'"><!-- for tab-scroll -->
                   <table border="2" >
                     <tr><th>selection</th>
                         <th>date</th><th>titre<th>texte/résumé</th><th>lien_externe</th><th>fichier_image<th>fichier_details</th>
                    </tr> 
                    <tr *ngFor="let p of tabPublications">
                        <td><input type="checkbox" [(ngModel)]="p.selection" />{{p._id}}</td>
                        <td>{{p.date}}</td><td>{{p.titre}}</td><td>{{p.resume}}</td><td>{{p.lien_externe}}</td><td>{{p.fichier_image_name}}</td><td>{{p.fichier_details_name}}</td>
                      </tr>         
                  </table>
                  </div><!-- for tab-scroll -->
                  action: <input type="button" value="supprimer les publications selectionnes" 
                                (click)="onSupprimerPublicationsSelectionnees()"/> <br/>
                <!-- fin contenu onglet 2 -->
                </div>
                </ng-template>
              </ngb-tab>
    </ngb-tabset>
    <span>{{msg}}</span>
    </div><!-- fin card-body -->
  </div><!-- fin card -->  
